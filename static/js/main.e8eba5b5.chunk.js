(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(37)},28:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),i=a.n(r),c=a(2),l=a(3),s=a(5),h=a(4),d=a(6),u=(a(28),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads"))}}]),t}(n.Component)),b=a(13),f=a(10),m=a(7),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).deleteBook=function(e){var t=e.target.id,n=a.state.oldBookShelf;a.props.onNone(n,t)},a.changeShelf=function(e){var t=e.target.id,n=e.target.value,o=a.state.oldBookShelf;a.props.changeShelf(o,n,t)},a.handleChange=function(e){var t=e.target.value;if(a.props.onMain)"none"===t?a.deleteBook(e):a.changeShelf(e);else{var n=e.target.id;"none"===t?a.deleteBook(e):(a.setState({oldBookShelf:e.target.value,selectedOpt:e.target.value}),a.props.changeShelf(n,t))}},a.setOldShelf=function(e){a.setState({oldBookShelf:e.target.value})},a.state={oldBookShelf:e.selectedOpt?e.selectedOpt:"",selectedOpt:e.selectedOpt?e.selectedOpt:""},a.changeShelf=a.changeShelf.bind(Object(m.a)(Object(m.a)(a))),a.setOldShelf=a.setOldShelf.bind(Object(m.a)(Object(m.a)(a))),a.deleteBook=a.deleteBook.bind(Object(m.a)(Object(m.a)(a))),a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.id;return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{id:t,value:this.state.selectedOpt,onChange:function(t){e.handleChange(t)},onClick:function(t){e.setOldShelf(t)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),(this.state.selectedOpt,o.a.createElement("option",{value:"currentlyReading"},"Currently Reading")),(this.state.selectedOpt,o.a.createElement("option",{value:"wantToRead"},"Want to Read")),(this.state.selectedOpt,o.a.createElement("option",{value:"read"},"Read")),(this.state.selectedOpt,o.a.createElement("option",{value:"none"},"None"))))}}]),t}(n.Component),p=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.authors,n=e.imageLinks,r=e.id,i=e.changeShelf,c=e.selectedOpt,l=e.onNone,s=e.onMain,h=t.split(" "),d="";h.forEach(function(e){d=d+"%20"+e});var u="url(".concat(n&&n.thumbnail?"".concat(n.thumbnail):"http://via.placeholder.com/128x193?text=".concat(d),")");return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:u}}),o.a.createElement(k,{id:r,changeShelf:i,selectedOpt:c,onNone:l,onMain:s})),o.a.createElement("div",{className:"book-title"},t),o.a.createElement("div",{className:"book-authors"},Array.isArray(a)?a.join(", "):"Unknown Author"))}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.books,a=e.changeShelf,n=e.onNone;return o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(p,{title:e.title,authors:e.authors,imageLinks:e.imageLinks,id:e.id,changeShelf:a,selectedOpt:e.shelf,onNone:n,onMain:!0}))})))}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shelfTitle,a=e.booklist,n=e.changeShelf,r=e.onNone;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t),o.a.createElement(O,{books:a,changeShelf:n,onNone:r}))}}]),t}(n.Component),g=a(15),v="https://reactnd-books-api.udacity.com",y=localStorage.token;y||(y=localStorage.token=Math.random().toString(36).substr(-8));var S={Accept:"application/json",Authorization:y},R=function(){return fetch("".concat(v,"/books"),{headers:S}).then(function(e){return e.json()}).then(function(e){return e.books})},E=function(e,t){return fetch("".concat(v,"/books/").concat(e.id),{method:"PUT",headers:Object(g.a)({},S,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},N=function(e){return fetch("".concat(v,"/search"),{method:"POST",headers:Object(g.a)({},S,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},w={currentlyReading:["Currently Reading","currentlyReading"],wantToRead:["Want to Read","wantToRead"],read:["Read","read"]},C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={books:[],currentlyReading:{id:w.currentlyReading[1],title:w.currentlyReading[0],booklist:[]},wantToRead:{id:w.wantToRead[1],title:w.wantToRead[0],booklist:[]},read:{id:w.read[1],title:w.read[0],booklist:[]}},a.knowOtherShelf=function(e,t){var a;return e===w.currentlyReading[1]&&t===w.wantToRead[1]?a=w.read[1]:e===w.currentlyReading[1]&&t===w.read[1]?a=w.wantToRead[1]:e===w.wantToRead[1]&&t===w.currentlyReading[1]?a=w.read[1]:e===w.wantToRead[1]&&t===w.read[1]?a=w.currentlyReading[1]:e===w.read[1]&&t===w.currentlyReading[1]?a=w.wantToRead[1]:e===w.read[1]&&t===w.wantToRead[0]&&(a=w.currentlyReading[1]),a},a.changeShelf=function(e,t,n){var o,r=a.knowOtherShelf(e,t);a.setState(function(a){var i;a.books.map(function(e){e.id===n&&(o=e)});var c=a[e].booklist.filter(function(e){if(e.id!==n)return e});o.shelf=t;var l=a[t].booklist;return l.push(o),i={},Object(f.a)(i,e,{id:a[e].id,title:a[e].title,booklist:c}),Object(f.a)(i,t,{id:a[t].id,title:a[t].title,booklist:l}),Object(f.a)(i,r,{id:a[r].id,title:a[r].title,booklist:a[r].booklist}),i})},a.removeFromShelf=function(e,t){var n,o;e===w.currentlyReading[1]?(n=w.read[1],o=w.wantToRead[1]):e===w.wantToRead[1]?(n=w.currentlyReading[1],o=w.read[1]):e===w.read[1]&&(n=w.currentlyReading[1],o=w.wantToRead[1]),a.setState(function(a){var r,i,c=a[e].booklist.filter(function(e){if(e.id!==t)return e;i=e});return E(i,"none"),r={books:Object(b.a)(c).concat(Object(b.a)(a[n].booklist),Object(b.a)(a[o].booklist))},Object(f.a)(r,e,{id:a[e].id,title:a[e].title,booklist:c}),Object(f.a)(r,n,{id:a[n].id,title:a[n].title,booklist:a[n].booklist}),Object(f.a)(r,o,{id:a[o].id,title:a[o].title,booklist:a[o].booklist}),r})},a.categorizeBooks=function(e){var t=[],a=[],n=[];return e.map(function(e){e.shelf===w.currentlyReading[1]?t.push(e):e.shelf===w.wantToRead[1]?a.push(e):e.shelf===w.read[1]&&n.push(e)}),{ofCurrentlyReading:t,ofWantToRead:a,ofRead:n}},a.changeShelf=a.changeShelf.bind(Object(m.a)(Object(m.a)(a))),a.removeFromShelf=a.removeFromShelf.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;R().then(function(t){var a=e.categorizeBooks(t),n=a.ofCurrentlyReading,o=a.ofWantToRead,r=a.ofRead;e.setState(function(e){return{books:t,currentlyReading:{id:e.currentlyReading.id,title:e.currentlyReading.title,booklist:n},wantToRead:{id:e.wantToRead.id,title:e.wantToRead.title,booklist:o},read:{id:e.read.id,title:e.read.title,booklist:r}}})})}},{key:"render",value:function(){return o.a.createElement("div",{className:"list-books-content"},o.a.createElement(j,{shelfTitle:this.state.currentlyReading.title,booklist:this.state.currentlyReading.booklist,changeShelf:this.changeShelf,onNone:this.removeFromShelf}),o.a.createElement(j,{shelfTitle:this.state.wantToRead.title,booklist:this.state.wantToRead.booklist,changeShelf:this.changeShelf,onNone:this.removeFromShelf}),o.a.createElement(j,{shelfTitle:this.state.read.title,booklist:this.state.read.booklist,changeShelf:this.changeShelf,onNone:this.removeFromShelf}))}}]),t}(n.Component),T=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"open-search"},o.a.createElement("a",{onClick:function(){e.props.onAdd()}},"Add a book"))}}]),t}(n.Component),B=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement(u,null),o.a.createElement(C,null),o.a.createElement(T,{onAdd:this.props.onAdd}))}}]),t}(n.Component),D=a(12),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState({query:t}),a.props.onSearch(t)},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.state={query:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(D.b,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){e.handleChange(t)}})))}}]),t}(n.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.books,a=e.changeShelf,n=e.onNone,r=e.booksIDs,i=e.booksByIDs;return o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return o.a.createElement("li",{key:e.id},r.includes(e.id)?o.a.createElement(p,{title:e.title,authors:e.authors,imageLinks:e.imageLinks,id:e.id,changeShelf:a,selectedOpt:i[e.id].shelf,onNone:n,onMain:!1}):o.a.createElement(p,{title:e.title,authors:e.authors,imageLinks:e.imageLinks,id:e.id,changeShelf:a,selectedOpt:"none",onNone:n,onMain:!1}))})))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={books:[],booksIDs:[],booksByIDs:{}},a.searchDatabase=function(e){N(e).then(function(e){return e}).then(function(e){void 0===e||"empty query"===e.error?a.setState({books:[]}):a.setState({books:e})})},a.changeShelf=function(e,t){E({id:e,shelf:t},t)},a.removeFromShelf=function(e,t){E({id:t},"none")},a.searchDatabase=a.searchDatabase.bind(Object(m.a)(Object(m.a)(a))),a.changeShelf=a.changeShelf.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;R().then(function(t){var a=[],n={};t.map(function(e){e&&e.id&&(a.push(e.id),n[e.id]=e)}),e.setState({booksIDs:a,booksByIDs:n})})}},{key:"render",value:function(){return o.a.createElement("div",{className:"search-books"},o.a.createElement(I,{onSearch:this.searchDatabase}),o.a.createElement(A,{books:this.state.books,booksIDs:this.state.booksIDs,booksByIDs:this.state.booksByIDs,changeShelf:this.changeShelf,onNone:this.removeFromShelf}))}}]),t}(n.Component),F=a(1),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(F.a,{exact:!0,path:"/",render:function(e){var t=e.history;return o.a.createElement(B,{onAdd:function(){t.push("/search")}})}}),o.a.createElement(F.a,{path:"/search",render:function(){return o.a.createElement(M,null)}}))}}]),t}(o.a.Component);a(35);i.a.render(o.a.createElement(D.a,null,o.a.createElement(L,null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.e8eba5b5.chunk.js.map